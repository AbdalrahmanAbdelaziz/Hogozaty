<p>checkout-remaining works!</p>
<div class="modal-overlay" *ngIf="isVisible">
    <div class="modal-content">
      <h3>Checkout</h3>
  
      <!-- Loading Indicator -->
      <div *ngIf="isLoading" class="loading-indicator">
        <div class="spinner"></div>
        <p>Processing...</p>
      </div>
  
      <!-- Debug Info (remove in production) -->
      <div *ngIf="!isLoading" class="debug-info">
        <p>Appointment ID: {{appointmentId}}</p>
        <p>Services Count: {{receiptServices.length}}</p>
      </div>
  
      <!-- Services Table -->
      <table class="services-table" *ngIf="receiptServices.length > 0">
        <thead>
          <tr>
            <th>Service</th>
            <th>Description</th>
            <th>Price</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let service of receiptServices">
            <td>{{ service.serviceName || 'N/A' }}</td>
            <td>{{ service.serviceDescription || 'No description' }}</td>
            <td>${{ (service.singleServicePriceForAppointment || 0).toFixed(2) }}</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <th colspan="2">Total</th>
            <th>${{ totalPrice.toFixed(2) }}</th>
          </tr>
        </tfoot>
      </table>
  
      <div *ngIf="!isLoading && receiptServices.length === 0" class="no-services">
        <p>No services found for this appointment</p>
      </div>
  
      <!-- Payment Form -->
      <form (ngSubmit)="onSubmit()" class="payment-form">
        <div class="payment-methods">
          <label>Select Payment Method:</label>
          <div class="payment-icons">
            <div
              *ngFor="let method of paymentMethods"
              [class.active]="paymentMethod === method.name"
              (click)="onPaymentMethodChange(method.name)"
              [title]="method.displayName"
            >
              <i [class]="method.icon"></i>
              <span>{{ method.displayName }}</span>
            </div>
          </div>
        </div>
  
        <div class="form-group">
          <label for="paidAmount">Amount Paid ($):</label>
          <input
            type="number"
            id="paidAmount"
            [(ngModel)]="paidAmount"
            name="paidAmount"
            (input)="calculateRemainingAmount()"
            min="0"
            [max]="totalPrice"
            step="0.01"
            required
            [disabled]="!paymentMethod"
          />
        </div>
  
        <div class="form-group">
          <label for="remainingAmount">Remaining Amount ($):</label>
          <input
            type="text"
            id="remainingAmount"
            [value]="remainingAmount >= 0 ? remainingAmount.toFixed(2) : '0.00'"
            name="remainingAmount"
            disabled
          />
        </div>
  
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" (click)="onClose()" [disabled]="isLoading">
            Cancel
          </button>
          <button 
            type="submit" 
            class="btn btn-primary" 
            [disabled]="isLoading || !paymentMethod || paidAmount <= 0 || paidAmount > totalPrice"
          >
            {{ isLoading ? 'Processing...' : 'Confirm Payment' }}
          </button>
        </div>
      </form>
    </div>
  </div>